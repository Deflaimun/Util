<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org">
<head>
	<title>Login APP</title>
 	<meta charset="utf-8">
 	<meta http-equiv="X-UA-Compatible" content="IE=edge">
 	<meta name="viewport" content="width=device-width, initial-scale=1">
	
	<link rel="stylesheet" type="text/css" href="./OCR_files/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="./OCR_files/css/estilo.css" />

<script>
	function onSubmit(token) {
		document.getElementById("registroForm").submit();
	}
</script>	
</head>
<body>	
	<div class="container">
		<div id="signupbox" class="mainbox col-md-12  col-sm-12 ">
			<div class="panel panel-warning">
				<div class="panel-heading">
					<div class="panel-title">
						
					</div>
					<div style="float: right; font-size: 100%; position: relative; top: 95px;">
						<a id="signinlink" th:href="@{/}">Login</a>
					</div>
				</div>
				<div style="padding-top: 0px" class="panel-body">
                    <h3>Dados Cadastrais</h3>
					
					<div th:if="${not #strings.isEmpty(successMessage)}" th:utext="${successMessage}" class="alert alert-success" role="alert">Cadastro Realizado com Sucesso</div>
					<div th:if="${not #strings.isEmpty(errorMessage)}" th:utext="${errorMessage}" class="alert alert-danger" role="alert">Mensagem de erro</div>
					
					<form id="registroForm" name="registroForm" class="form-horizontal" role="form" autocomplete="on" 
						method="POST" action="#" th:action="@{/usuario/cadastro/}" th:object="${usuario}">

						<fieldset>
																															
						
							<div class="form-group">
								<div class="col-md-12 input-group">
									<label	th:if="${#fields.hasErrors('documento.numero')}" th:errors="*{documento.numero}" class="validation-message"></label>	
									<input id="cpf" type="number" th:readonly="true" th:field="*{documento.numero}" placeholder="xxx.xxx.xxx-xx" class="form-control" data-mask="000.000.000-00" data-mask-selectonfocus="true" pattern="[0-9]{3}\.[0-9]{3}\.[0-9]{3}-[0-9]{2}$" title="Digite um CPF no formato: xxx.xxx.xxx-xx" maxlength="14"/>
                                    <label>CPF</label>
								</div>
							</div>
	
							<div class="form-group">
								<div class="col-md-12 input-group">
									<label class="validation-message" th:if="${#fields.hasErrors('telefone')}" th:errors="*{telefone}"></label>
									<input type="number" th:readonly="true" th:field="*{telefone}" placeholder="(xx) xxxxx-xxxx" class="form-control"
										data-mask="(00) 00000-0000" data-mask-selectonfocus="true" />
                                    <label>Telefone</label>
								</div>
							</div>
						</fieldset>
					
							<div class="form-group">
								<div class="col-md-12 input-group">
									<label th:if="${#fields.hasErrors('chaveEmpresa')}" th:errors="*{chaveEmpresa}" class="validation-message"></label>
									<input type="text" th:field="*{chaveEmpresa}" placeholder="" class="form-control" /> 				<label>Chave da Empresa</label>				
								</div>
							</div>
		
							<div class="form-group">
								<div class="col-md-12 input-group">
									<label th:if="${#fields.hasErrors('nome')}" th:errors="*{nome}" class="validation-message"></label>
									<input type="text" th:field="*{nome}" placeholder="" class="form-control" />
                                    <label>Nome</label>
								</div>
							</div>
							
							<div class="form-group ">
								<div class="col-md-12 input-group">
									<label class="validation-message" th:if="${#fields.hasErrors('sobrenome')}" th:errors="*{sobrenome}"></label>
									<input type="text" class="form-control" th:field="*{sobrenome}" placeholder=""/>
                                    <label>Sobrenome</label>
								</div>
							</div>
													
							<div class="form-group">
								<div class="col-md-12 input-group">
									<label class="validation-message" th:if="${#fields.hasErrors('email')}" th:errors="*{email}"></label>
									<input type="text" th:field="*{email}" placeholder="" class="form-control" />
                                    <label>E-mail</label>
								</div>
							</div>
					

						<div class="form-group">
							
								<fieldset>
                                    <div class="col-md-12 input-group">
                                        
									<label th:if="${#fields.hasErrors('password')}" th:errors="*{password}" class="validation-message"></label>
									<input id="password"        type="password" th:field="*{password}" placeholder="" class="form-control" />
                                    <label>Senha</label>
                                    </div>
                                    
                                    <div class="col-md-12 input-group">
									<input id="confirmPassword" type="password" placeholder="" class="form-control"  style="margin-top: 15px"/>
                                    <label>Repita a Senha</label>
                                    </div>
								</fieldset>
							</div>
						</div>

						<div class="form-group">
							<div class="col-md-12" style="padding: 0 0 0 0; background-color: #f6f6f6; margin-bottom: 50px;">
	        					<div th:switch="${not #strings.isEmpty(captcha)}">
	             					<button th:case="*" type="Submit" name="Submit" th:text="Login" class="btn btn-primary g-recaptcha" style="width: 50%; height: 50px;">Salvar</button>
									<button th:case="true" type="Submit" name="Submit" th:text="Login" class="btn btn-primary g-recaptcha" data-th-attr="data-sitekey=${captcha}" data-callback="onSubmit" style="width: 50%; height: 50px; float: left;" >Cancelar</button>
	        					</div>
							</div>
						</div>

						<input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}" />						
					</form>
				</div>
			</div>
		</div>
	</div>
	
	<script src="./OCR_files/js/jquery-3.2.1.min.js" type="text/javascript"></script>
	<script src="./OCR_files/js/jquery.mask.min.js" type="text/javascript"></script>
	<script src="./OCR_files/js/bootstrap.min.js" type="text/javascript"></script>
	<script src="./OCR_files/js/main.js" type="text/javascript"></script>
	<script src="./OCR_files/js/api.js" type="text/javascript"></script>
	<script th:if="${not #strings.isEmpty(captcha)}" src='https://www.google.com/recaptcha/api.js'></script>
	
	<script type="text/javascript">
		var password = document.getElementById("password"), confirm_password = document.getElementById("confirmPassword");
	
		function validatePassword(){
		  if(password.value != confirmPassword.value) {
		  	confirmPassword.setCustomValidity("Senhas não conferem!");
		  } else {
			confirmPassword.setCustomValidity('');
		  }
		}
	
		password.onchange = validatePassword;
		confirmPassword.onkeyup = validatePassword;	

		var cpf = document.getElementById("cpf");

		function validateCPF(){
			if(!validarCPF(cpf.value)){
				cpf.setCustomValidity("CPF digitado inválido");
			} else {
				cpf.setCustomValidity('');
			}
		}	
			cpf.onchange = validateCPF;
	</script>
	
</body>
</html>